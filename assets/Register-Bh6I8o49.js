import{_ as P,r as b,a as v,c as R,o as U,b as o,d as s,w as a,e as u,u as q,f as m,E as p}from"./index-NrR5gDLZ.js";import{a as E}from"./api-D5CWHRCG.js";const $={class:"register-page"},B={class:"register-container"},C={class:"register-form-container"},F={class:"agreement"},N={class:"form-footer"},j={__name:"Register",setup(h){const w=q(),g=b(null),f=b(!1),i=b(!1),r=v({name:"",phone_number:"",id_number:"",password:"",confirmPassword:""}),c=v({name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度在2到20个字符之间",trigger:"blur"}],phone_number:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入有效的11位手机号码",trigger:"blur"}],id_number:[{required:!0,message:"请输入身份证号",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入有效的身份证号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(_,e,t)=>{e!==r.password?t(new Error("两次输入的密码不一致")):t()},trigger:"blur"}]}),V=async()=>{g.value&&await g.value.validate(async _=>{var e,t;if(_){if(!i.value){p.warning("请阅读并同意用户协议和隐私政策");return}f.value=!0;const n={name:r.name,phone_number:r.phone_number,id_number:r.id_number,password:r.password};try{const d=await E.register(n);d.data.code===200?(p.success("注册成功，请登录"),w.push("/login")):p.error(d.data.message||"注册失败")}catch(d){p.error(((t=(e=d.response)==null?void 0:e.data)==null?void 0:t.message)||"注册出错，请稍后再试")}finally{f.value=!1}}})};return(_,e)=>{const t=u("el-input"),n=u("el-form-item"),d=u("el-checkbox"),y=u("el-button"),x=u("router-link"),k=u("el-form");return U(),R("div",$,[o("div",B,[e[14]||(e[14]=o("div",{class:"register-info"},[o("div",{class:"register-info-content"},[o("h1",{class:"system-name"},"博物馆知识问答系统"),o("p",{class:"system-desc"},"注册账号，开启知识探索之旅")])],-1)),o("div",C,[e[13]||(e[13]=o("div",{class:"register-form-header"},[o("h2",null,"账号注册")],-1)),s(k,{ref_key:"registerFormRef",ref:g,model:r,rules:c,class:"register-form"},{default:a(()=>[s(n,{prop:"name"},{default:a(()=>[s(t,{modelValue:r.name,"onUpdate:modelValue":e[0]||(e[0]=l=>r.name=l),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),s(n,{prop:"phone_number"},{default:a(()=>[s(t,{modelValue:r.phone_number,"onUpdate:modelValue":e[1]||(e[1]=l=>r.phone_number=l),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),s(n,{prop:"id_number"},{default:a(()=>[s(t,{modelValue:r.id_number,"onUpdate:modelValue":e[2]||(e[2]=l=>r.id_number=l),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:a(()=>[s(t,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=l=>r.password=l),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{prop:"confirmPassword"},{default:a(()=>[s(t,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>r.confirmPassword=l),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]),_:1}),s(n,null,{default:a(()=>[o("div",F,[s(d,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=l=>i.value=l)},{default:a(()=>e[6]||(e[6]=[m("我已阅读并同意")])),_:1},8,["modelValue"]),e[7]||(e[7]=o("a",{href:"javascript:void(0)"},"《用户协议》",-1)),e[8]||(e[8]=m("和")),e[9]||(e[9]=o("a",{href:"javascript:void(0)"},"《隐私政策》",-1))])]),_:1}),s(n,null,{default:a(()=>[s(y,{type:"primary",loading:f.value,onClick:V,disabled:!i.value,class:"register-button"},{default:a(()=>e[10]||(e[10]=[m(" 注册 ")])),_:1},8,["loading","disabled"])]),_:1}),o("div",N,[e[12]||(e[12]=o("span",null,"已有账号？",-1)),s(x,{to:"/login"},{default:a(()=>e[11]||(e[11]=[m("返回登录")])),_:1})])]),_:1},8,["model","rules"])])])])}}},M=P(j,[["__scopeId","data-v-f126f267"]]);export{M as default};
